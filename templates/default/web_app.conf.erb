#
#  Dynamically generated by Chef on <%= node["fqdn"] %>
#  Local modifications will be overwritten by Chef.
#
<VirtualHost *:80>
  ServerName <%= @params[:server_name] %>
  ServerAlias <% @params[:server_aliases].each do |a| %><%= a %> <% end %>
  DocumentRoot /var/www/html
  
  CustomLog <%= node['apache']['log_dir'] %>/<%= @params[:name] %>-access.log combined
  ErrorLog <%= node['apache']['log_dir'] %>/<%= @params[:name] %>-error.log
  LogLevel info
</VirtualHost>

<VirtualHost *:443>
  ServerName <%= @params[:server_name] %>
  ServerAlias <% @params[:server_aliases].each do |a| %><%= a %> <% end %>
  DocumentRoot /var/www/html

  CustomLog <%= node['apache']['log_dir'] %>/<%= @params[:name] %>-ssl-access.log combined
  ErrorLog <%= node['apache']['log_dir'] %>/<%= @params[:name] %>-ssl-error.log
  LogLevel info

  SSLEngine on
  SSLCertificateFile <%= @params[:ssl_certificate_file] %>
  SSLCertificateKeyFile <%= @params[:ssl_key_file] %>
  <% unless @params[:ssl_chain_file].empty? -%>
  SSLCertificateChainFile <%= @params[:ssl_chain_file] %>
  <% end -%>
</VirtualHost>
